os: linux
dist: xenial
language: node_js
node_js:
- node
cache:
  directories:
  - node_modules
script:
- yarn global add serverless
- yarn deploy -v --stage prod > output.txt
- 'ENDPOINT=$(grep ''ServiceEndpoint:'' output.txt | sed ''s/^.*: //'')'
- echo $ENDPOINT
- curl -S https://api.telegram.org/bot$BOT_TOKEN/setWebhook?url=$ENDPOINT/send
- echo success!
env:
  global:
  - secure: G81S/O+p2+F1jQg0jqk943LV0UOAwc+icOcpxcRxxnIRswBnQtFtMswBOQcVQ6URvJajjTmQNAHBuBmrxbECAG9bJ29siIssO82okDbRoBjTljTfePJw2hctv+ovSdA1lXqY4QGs6rPHN0tG2R4iOiVNgEaF/1MbonyhZ70T/9J4E0UwgkaDu+VrF9m8/uBYEeTJYSI1HYyvoek5gPKhLUsrrT+XbT9DCRnpTvvT8RBn59G8feXAdqHaRy9wYGykemv0AhUXxCVTbZOrfyC3/ZD+lRSLTzi4ifGb9Um3fWH5hDJ/5tvtii/Ar/KjzjcilCCCEz5EcCnq16hOmd2QZkFSWoVnUxlP8gztNCQoTmiNDNqPbFYxdNYUn57HEwjOrO1kt0NUlyPEuhmsrz9lue9tdYHducbLEzWovMTrkzesa5hcPtayyq/N4SE6LqJwlR5FnS0Eadk9Di+V0d7cLtUnK/eRHWA7JMS1KMATV9xaB51jA2jwcPWUYoxaTb/XxMbE+1efcnJBby1jFmL/h40Ybxd64eypys+/TqBwQjv5DXe5K21KyZpW0McVq6bIFeDQrVCxS4/e5yPLfKIuKSlR1H8AOA15I9y4PCHTL4iqsijAY/EDflkTsyfW3Vrjvg8EfXqB+Xa+CQSnWeTgRQoiSXIAMwKE/j9NHxv5IQc=
  - secure: VooYDNqpdcd7icaDr5o+uClQsds1sB/uTSy/16+CuSP96sfN1xol0l8H5fGkk5xLfY3JkhLHZYFlBMSczHc/vdexkZW7k+39AbAlpGUofaeTp3J8A9fniGnCJzttRJLD6z+O8IVdeCaSej2byAnJAqkm9F5BB3sPZw3oRJhdWlVx9I9XJvMcIqcmQR72715RsLnCGNfZrbCa77ko/JQDKYnJ5RbFRS5dzwfvnFBKyaroriBpv8m5XqNMEXVJyliAg2oiYDhZ/3acrmx7fRKhF1UJSMx0cK8K5SBv1GieRQKzhsM2PnUgez6Rc5DXcxb+GyMwKMYZhCvJyotjcex9O/w3x/1v7iHz1hS1ZW0FEbZEldH8nXnREzqT5gg3ZBnLCU29yfy3e8cE4yFLi6yZ6Em5qTzPbJLH5AguABIGtxRcTHvdGKIq6SV6IASJzvpSCvEFc7XO5D47LUyfkuH7vq6+Kj+W2uQ6JQfXIMAh7suk6mpHypCm1Yg+s7yXBq8VFzZS6+SXdQCnAsfaKrj55lAsE3s1L85U9VeyfhPqPQyBeRgGHHAXPuDEdlunNwHFGLEDFAlPNNp1zDtAKOIk+ZM9meaUfjgpEkaVXAneAfDBqxOxevltMRG1wyQq10VRvXBMOFueMIbt9ipaX3dwi3j38Pwm860zP37CX/xBsDY=
  - secure: V6+c5By3W43SzmUeLaP/qHhmBcVhnyoA4yVypUoO2njSj4IlnjpeOWJKgG54/++mL8iPNQXl5dOujd9TUU2k7niXF85p4IQ8YAis2/lWPPOSPJlKuodqA0d3v7VcPnwv4ALhFlyjNmcHB6t+NxhVSDNFuvc1UB2B/OodERoCInVnMMqy7/+WQPlFKva2zYWlIRh8TOhfEi3XvZwDh6lwxCvFzW1u1dsyNLKTuPakyh3K5bz+kz4LY1LdazoROQX8+cuvW5DjDUnT9yWeo1QWWryS2CYNN1zucKC++wmKSf7gg7anZ0osrfoXwYP60upt1NfHqWE0Icu/SpGeTpbesj8ObQZf9mipzW0EknHiCz3BGTSP6HYb2DAn0Tso2Z5EbwhRC3vK1quVfN5LlVF4OdUj4IPV+WG2h3WkPxtm2PSEbLwupCLw+jeI3+7qA4GcRGvHBTDHJqBYR9zJ2hrPYFJQrbmU//K4bjwgbwTWkSngHBGA0dua+IASr6NSxIOajT1B5WCdAybH8zgwElam6QMITzsT0/enAG5aSNWCtTroTy4mwA3UeRqS3m9mgsTei/45L3Ip4cl+TGWNYVH1hUdaot0xpto/pJOzujXyRjm2Du5l6AFYLzooGuevmc+tGLp2DvQPkrUBt/9v0v84/UoXZfnT0jvgUN1ND/oZMZY=
  - secure: rbuL5XqoXOT6wtO3HAyI/37TnyDpFZxmhWy7G6lrKXPaPV2TeCweg2r7xg0E++zmYazXTdyb9rNeJMkIYBZ8Gxzz18wivZ/+89sUxkTJuVrZHHA56IoaGQOSD1lCfphB0YFKXHpMGK2Kzdj11hc+k9ONmyZwxQxTb+wCBivt4nSL+RBH8lvUx5GKyosh57Y1RgHXaDeDKHYBWmDw2xWiXKqHD2J8jYyhWJ6a7I7OO9bt/cszFFjm4P1+/+S9/uXoJgwsUbt57n+YvTVhIaaQD9xcGnISZwLKfBn0hg+UeAFaf7/KbgAGppv+GrWYJQVhytKnJaXT7Lb14vwM42xo9lnq7XgBhIBdoDzi5hEMHr6UTyjNQHI2IQRQ7QSQN1zHPDiPNgTgY+4PhK3p0ivCq5bL+TI8XurNisIlChw7PPbTUcUsDdSDbQFvrNoiwjHGqGVvEb2vQVcGRw2k850et86ueNDmj4BJAeOq44eEZwZMXYPn3pyrTtQ0qDamc+CgVFllRylO6YZUqb0Ga6BLYPe7WIC7pDv/thTX49V/Lha6ootBCowdaydrHwcY4XvoEosKNa1gqc+xibjvu9bS651eQo/5iuV/0l9HkLhPoT9ZcWWXoz7Z1TaP5ci/CFvV5lJuV4KPtmlhXmfAdQKbFU2qtMea15x4zolAMSJQk3I=
  - secure: JQU3zYa2EyuYLYzfoDKzY9gYUgpHrQqyR//nXkQE7uwKytB47Mekk2fI80UyTfjNwzToV+TUp4rUXy64u5Lx8xIt9b8k2gCk2ijBbi1GdybEBc2KrK8GfBXj14RXkAKFwL3UvXJJR8KSNPGazAiLD2jt6xjNEjEJ/FzKyXqAs0ga6OV5a0zW08ycdtU1xQr/nlnpQbkZFUsZo1+Z9pxlpr7LGFUM7NTIqYBcMMHqkYlLpEcIbxJZbTnhjwZ7fcb+BGhO35i3GPH1DfyE2cm4RtLPZKT+YFBqL+2kZCB70/llSBBvMyyDgFLmNhaNISTrWDGhz2O87HQ9rqA2o/y0pn5+RNdr/g6XuW90LtJT+9jhboN0H8Y4Uii/lp3FLrrhEmSqn7ag2m1nAqa4wRYILZ6AtJ6yBYDiSk1M1NV1e0EdWreTsKbp/1WCT6mC5zxiVQx8Blu5SDkX043jsZkmEG6OFpA5B0gI0vlKeDaxT73ZIDpvLqkR/W+4IUvWgek+lch4391hiyD7UolJRkdrGtmAONd0daJZw2OB75UA1cQDy9yJNiVvePjsFP8jO4DfMNnrPhOQJD1imcC8RcShdg3oI8T0tr6dMiD5nXdNekHMBozpH0jy+jCEFNyb8fF3vHvH1/pdZfzvOq7RjWfMGMs7ZUxrlP/6jKrLWtSdPYg=
